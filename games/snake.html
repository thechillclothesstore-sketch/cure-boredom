<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake</title>
<link rel="stylesheet" href="../style.css">
<style>
  canvas { background: #27293d; display: block; margin: auto; margin-top: 20px; border:2px solid white; }
</style>
</head>
<body>
<h1>Snake</h1>
<canvas id="game" width="400" height="400"></canvas>
<br>
<a href="../index.html">â¬… Back</a>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scale = 20;
const rows = canvas.height/scale;
const cols = canvas.width/scale;

let snake = [{x:10, y:10}];
let direction = {x:0, y:0};
let food = randomFood();

function randomFood(){
  return {x: Math.floor(Math.random()*cols), y: Math.floor(Math.random()*rows)};
}

window.addEventListener('keydown', e => {
  switch(e.key){
    case 'ArrowUp': if(direction.y==0) direction={x:0,y:-1}; break;
    case 'ArrowDown': if(direction.y==0) direction={x:0,y:1}; break;
    case 'ArrowLeft': if(direction.x==0) direction={x:-1,y:0}; break;
    case 'ArrowRight': if(direction.x==0) direction={x:1,y:0}; break;
  }
});

function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // draw food
  ctx.fillStyle = 'red';
  ctx.fillRect(food.x*scale, food.y*scale, scale, scale);
  // move snake
  let head = {x:snake[0].x + direction.x, y:snake[0].y + direction.y};
  snake.unshift(head);
  if(head.x==food.x && head.y==food.y){
    food=randomFood();
  } else {
    snake.pop();
  }
  // draw snake
  ctx.fillStyle = 'lime';
  snake.forEach(s=>ctx.fillRect(s.x*scale, s.y*scale, scale, scale));
  // collision
  if(head.x<0||head.x>=cols||head.y<0||head.y>=rows||snake.slice(1).some(s=>s.x==head.x&&s.y==head.y)){
    alert("Game Over!");
    snake=[{x:10,y:10}];
    direction={x:0,y:0};
  }
}

setInterval(gameLoop, 200);
</script>
</body>
</html>
